<div class="filter">
	<div class="container">
		<div class="caption" style="margin-bottom:10px"><span class="fa fa-cogs mr5"></span> @(Practice change)</div>
	</div>
</div>

<div class="container">
    <div class="row">
        @{foreach m in repository.size}
            <div class="col-md-4 adm_carousel">
                <img src="/img/carousel/carousel@{m}.jpg" alt="">
            </div>
            <i class="fa fa-trash"></i>
        @{end}
    </div>
</div>


<div class="container">
    <p>Файлы на карусель </p>
    <form enctype="multipart/form-data" action="" method="POST" >
        
        <input type="file" name="file">
        <input type="submit" value="Отправить">
    </form>
</div>

<div class="container">
        <i class="fa fa-trash"></i>
    <form action="" method="POST" class="delete-image">
        
        <input type="text" name="number">
        <input type="submit" value="Отправить">
    </form>
</div>
<script> 

    $.ajax({
        type: 'GET',
        url: 'api/carousel',
        success: function(data) {
            for (var i = 0; i < data.size; i++) {   
                $('adm_carousel').append('<div class="col-md-4 adm_carousel"><img src="/img/carousel/carousel@{m}.jpg" a></div><div><button><i class="fa fa-trash"></i><button></div>')
            }
        }

    })

    $('.fa-trash').click(function () {
        e.preventDefault();
        let delete_num=$('.delete-image').children("[name='number']").val();
        let send_num = parseInt(delete_num);
        alert(send_num);
        if (!send_num||send_num<0)
            {
                alert("Неправильный ввод для удаления, введите номер изображения")
                return 0;
            }
        AJAX('POST /$manager/delete-image',{num:send_num},(res)=>{
            if (res.err)
                alert(res.err)
            if (res.ok){
                alert("Успешное удаление");
            }
        })
    })

</script>